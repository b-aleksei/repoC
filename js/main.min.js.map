{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./js/main.js","webpack:///./js/modules/fileLoad.js","webpack:///./js/modules/helper.js","webpack:///./js/modules/intersectFilm.js","webpack:///./js/modules/menu.js","webpack:///./js/modules/parallax.js","webpack:///./js/modules/preview.js","webpack:///./js/modules/video.js","webpack:///./js/utils/ValidForm.js","webpack:///./js/utils/modal.js","webpack:///./js/utils/phoneMask.js"],"names":["parallax","video","fileLoad","debounceDelay","timer","document","addEventListener","e","showPass","target","closest","navButton","categoryBtn","btnDetails","showPreview","clearTimeout","setTimeout","showPassword","toggleMenu","passive","authForm","querySelector","Validate","mainSlider","Flickity","wrapAround","setGallerySize","autoPlay","prevNextButtons","categorySlider","cellAlign","freeScroll","contain","pageDots","detailsSlider","avatar","fileLoader","src","URL","createObjectURL","files","btn","input","parentElement","classList","contains","remove","type","add","lazyImages","slice","call","querySelectorAll","delay","window","lazyFilmObserver","IntersectionObserver","entries","forEach","img","isIntersecting","style","transitionDelay","source","srcset","dataset","unobserve","observe","isTouch","touchWidth","body","invertExpanded","el","getAttribute","menuBtns","activeClass","setAttribute","toggle","documentElement","clientWidth","removePreview","images","length","ticking","lastScrollY","innerHeight","offsetHeight","onResize","onScroll","requestAnimationFrame","updateElements","pageYOffset","relativeY","transform","previewTemplate","itemsInRow","activePreview","currentParent","currentStarter","cashe","insertChild","index","parent","arrEls","preview","cloneNode","btnClose","updateModalField","after","key","once","focus","modal","console","log","getRowForPreview","reviewIndex","totalRows","Math","ceil","i","filmsParent","id","details","films","indexOf","getElementById","play","trailerWrap","config","regEmail","errorMessages","required","phone","email","url","xhr","XMLHttpRequest","open","send","onload","status","JSON","parse","response","form","conf","defaultConfig","classError","statusMessages","success","bad","error","Object","assign","init","hasAttribute","setCustomValidity","validate","onFocusPhoneInput","checkValue","inputs","currentTarget","checkValidity","preventDefault","sendData","message","errorEl","innerText","value","setErrorMes","trim","test","phoneLength","replace","spinner","objModal","frozen","location","pathname","modalInfo","title","beforeSending","transferAction","reset","afterSending","FormData","MultiModal","props","openBtnAttribute","closeBtnAttribute","closeOnOverlay","multiple","beforeOpen","beforeClose","openedWindows","currentWindow","reopen","scrollPosition","_focusableEls","overlay","createElement","append","eventsFeeler","opener","modalId","close","focusCatcher","selector","HTMLElement","removeOverlay","focusableElements","starter","activeElement","bodyScrollControl","setFocus","removeEventListener","push","_currentWindow","pop","previousStarter","modalOpen","firstFocusableEl","lastFocusableEl","shiftKey","html","self","top","scrollTo","modalLoginInit","modalRegisterInit","obj","COUNTRY_CODE","onInputPhoneInput","matrix","def","val","Array","prototype","item","isValNumber","charAt","onBlurPhoneInput"],"mappings":"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","file":"main.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./js/main.js\");\n","import parallax from './modules/parallax';\nimport video from './modules/video';\nimport fileLoad from './modules/fileLoad';\nimport {showPassword} from './modules/helper';\nimport {toggleMenu} from './modules/menu';\nimport './modules/intersectFilm';\nimport {showPreview} from './modules/preview';\nimport {Validate} from './utils/ValidForm';\n\n\nparallax();\nvideo();\nfileLoad();\n\nconst debounceDelay = 300;\nlet timer = null;\n\ndocument.addEventListener('click', (e) => {\n\tconst showPass = e.target.closest('.show-password');\n\tconst navButton = e.target.closest('.nav__toggle');\n\tconst categoryBtn = e.target.closest('.category-btn');\n\tconst btnDetails = e.target.closest('.film__watch');\n\n\tif (btnDetails) {\n\t\tif (!timer) {\n\t\t\tshowPreview(btnDetails);\n\t\t}\n\t\tclearTimeout(timer);\n\t\ttimer = setTimeout(() => timer = null, debounceDelay);\n\t}\n\n\tif (showPass) {\n\t\tshowPassword(showPass);\n\t}\n\n\tif (navButton) {\n\t  toggleMenu(navButton, 'menu-active');\n\t}\n\n\tif (categoryBtn) {\n\t  toggleMenu(categoryBtn, 'category-active');\n\t}\n}, {passive: true});\n\n\nconst authForm = document.querySelector('.profile');\nif (authForm) {\n\tnew Validate(authForm);\n}\n\n\nconst mainSlider = document.querySelector('.banner');\nif (mainSlider) {\n\tnew Flickity(mainSlider, {\n\t\twrapAround: true,\n\t\tsetGallerySize: false,\n\t\tautoPlay: true,\n\t\tprevNextButtons: false,\n\t\t// watchCSS: true,\n\t});\n}\n\nconst categorySlider = document.querySelector('.favorite__list');\nif (categorySlider) {\n\tnew Flickity(categorySlider, {\n\t\tcellAlign: 'left',\n\t\tfreeScroll: true,\n\t\tcontain: true,\n\t\tprevNextButtons: false,\n\t\tpageDots: false,\n\t});\n}\n\nconst detailsSlider = document.querySelector('.details-slider');\nif (detailsSlider) {\n\tnew Flickity(detailsSlider, {\n\t\tcellAlign: 'left',\n\t\tfreeScroll: true,\n\t\tcontain: true,\n\t\tprevNextButtons: false,\n\t\tpageDots: false,\n\t\tsetGallerySize: false,\n\t});\n}\n","export default () => {\n  const avatar = document.querySelector('.avatar-profile img');\n  const fileLoader = document.querySelector('#fileLoader');\n\n  if (!avatar || !fileLoader) {\n    return;\n  }\n\n  fileLoader.addEventListener('change', ({target}) => {\n    avatar.src = URL.createObjectURL(target.files[0]);\n  });\n};\n","\nexport const showPassword = (btn) => {\n  const input = btn.parentElement.querySelector('input');\n\n  if (btn.classList.contains('show')) {\n    btn.classList.remove('show');\n    input.type = 'password';\n  } else {\n    btn.classList.add('show');\n    input.type = 'text';\n  }\n};\n","document.addEventListener('DOMContentLoaded', () => {\n\tconst lazyImages = [].slice.call(document.querySelectorAll('.lazy-img'));\n\tlet delay = 1;\n\n\tif ('IntersectionObserver' in window) {\n\t\tconst lazyFilmObserver = new IntersectionObserver((entries) => {\n\t\t\tentries.forEach((img) => {\n\t\t\t\tif (img.isIntersecting) {\n\t\t\t\t\timg.target.style.transitionDelay = `0.${delay++}s`;\n\t\t\t\t\timg.target.classList.remove('inv');\n\t\t\t\t\tconst source = img.target.querySelector('source');\n\t\t\t\t\tif (source) {\n\t\t\t\t\t  source.srcset = source.dataset.srcset;\n\t\t\t\t\t}\n\t\t\t\t\tlazyFilmObserver.unobserve(img.target);\n\t\t\t\t}\n\t\t\t});\n\t\t\tdelay = 1;\n\t\t});\n\n\t\tlazyImages.forEach((img) => lazyFilmObserver.observe(img));\n\t}\n});\n","import {removePreview} from './preview';\n\nlet isTouch = false;\nconst touchWidth = 1200;\nconst body = document.body;\nconst invertExpanded = (el) => el.getAttribute('aria-expanded') === 'false' ? 'true' : 'false';\nconst menuBtns = document.querySelectorAll('.category-btn, .nav__toggle');\n\nexport const toggleMenu = (btn, activeClass) => {\n\t  if (!isTouch) {\n\t\treturn;\n\t}\n\tbtn.setAttribute('aria-expanded', invertExpanded(btn));\n\tbody.classList.toggle(activeClass);\n};\n\nif (document.documentElement.clientWidth < touchWidth) {\n\tisTouch = true;\n}\nwindow.addEventListener('resize', () => {\n\tif (document.documentElement.clientWidth > touchWidth && isTouch) {\n\t\tbody.classList.remove('menu-active', 'category-active');\n\t\tmenuBtns.forEach(btn => btn.setAttribute('aria-expanded', 'false'));\n\t\tisTouch = false;\n\t\treturn;\n\t}\n\tif (document.documentElement.clientWidth <= touchWidth && !isTouch) {\n\t\tremovePreview();\n\t\tisTouch = true;\n\t}\n});\n\n","export default () => {\n  const images = document.querySelectorAll('.blob-parallax');\n\n  if (!images.length) {\n    return\n  }\n\n  let ticking = false;\n  let lastScrollY = 0;\n  let innerHeight = document.documentElement.offsetHeight;\n\n  function onResize() {\n    innerHeight = document.documentElement.offsetHeight;\n  }\n\n  function onScroll() {\n\n    if (!ticking) {\n      ticking = true;\n      requestAnimationFrame(updateElements);\n      lastScrollY = window.pageYOffset;\n    }\n  }\n\n  function updateElements() {\n\n    const relativeY = lastScrollY / innerHeight;\n\n    images.forEach((img) => {\n      img.style.transform = 'translate3d(0,' + relativeY * 500 + 'px, 0)';\n    });\n\n    ticking = false;\n  }\n\n  window.addEventListener('resize', onResize);\n  window.addEventListener('scroll', onScroll);\n\n}\n\n\n","\nconst previewTemplate = document.querySelector('.preview');\n\nconst itemsInRow = 4;\nlet activePreview = null;\nlet currentParent = null;\nlet currentStarter = null;\n\nconst cashe = {};\n\nconst insertChild = (index, parent, arrEls) => {\n\tif (activePreview) {\n\t\tremovePreview();\n\t}\n\tconst preview = previewTemplate.cloneNode(true);\n\tconst btnClose = preview.querySelector('.preview__close');\n\tbtnClose.addEventListener('click', () => {\n\t\tremovePreview();\n\t});\n\n\tpreview.dataset.index = index;\n\tupdateModalField(preview);\n\tarrEls[index - 1].after(preview);\n\tsetTimeout(() => {\n\t\tactivePreview = preview;\n\t\tdocument.addEventListener('keydown', (e) => {\n\t\t\tif (activePreview && e.key === 'Escape') {\n\t\t\t\tremovePreview();\n\t\t\t}\n\t\t}, {once: true});\n\t\tpreview.classList.add('preview--visible');\n\t}, 200);\n};\n\nexport const removePreview = () => {\n\tif (activePreview) {\n\t\tactivePreview.addEventListener('transitionend', function() {\n\t\t\tthis.remove();\n\t\t}, {once: true});\n\t\tactivePreview.classList.remove('preview--visible');\n\t\tactivePreview = null;\n\t\tcurrentStarter.focus();\n\t}\n};\n\nconst updateModalField = (modal) => {\n\tconsole.log('updateModalField from server', modal);\n};\n\nconst getRowForPreview = (index, parent, arrEls) => { // определяем после какого ряда добавить preview окно\n\tif (index === -1) {\n\t\treturn;\n\t}\n\tlet reviewIndex = null;\n\tconst totalRows = Math.ceil(arrEls.length / itemsInRow);\n\tfor (let i = itemsInRow; i <= totalRows * itemsInRow; i += itemsInRow) {\n\t  if (index < i) {\n\t\t\treviewIndex = i;\n\t\t\tbreak;\n\t  }\n\t}\n\n\t// если открыто превью и мы нажимаем на другом ряду, закрываем предыдущее окно\n\tif (activePreview && +activePreview.dataset.index === reviewIndex && currentParent === parent) {\n\t\tupdateModalField(activePreview);\n\t\treturn;\n\t}\n\n\tcurrentParent = parent;\n\tinsertChild(reviewIndex, parent, arrEls);\n};\n\nexport const showPreview = (btn) => {\n\tconst filmsParent = btn.closest('.film-list');\n\tif (!filmsParent || !previewTemplate) {\n\t\treturn;\n\t}\n\tcurrentStarter = btn;\n\tconst id = btn.dataset.details;\n\tconst films = [].slice.call(filmsParent.querySelectorAll('.film-item'));\n\tconst index = films.indexOf(document.getElementById(id));\n\tgetRowForPreview(index, filmsParent, films);\n};\n","export default () => {\n\tconst play = document.querySelector('#play-trailer');\n\tconst video = document.querySelector('video');\n\tconst trailerWrap = document.querySelector('.trailer__wrap');\n\n\tif (!play || !video || !trailerWrap) {\n\t\treturn;\n\t}\n\n\tplay.addEventListener('click', () => {\n\t\ttrailerWrap.classList.add('playing');\n\t\t// video.firstElementChild.src = video.firstElementChild.dataset.src;\n\t\t// video.load();\n\t\tvideo.play();\n\t}, {once: true});\n};\n","import onFocusPhoneInput from './phoneMask';\nimport {objModal} from './modal';\n\nconst config = {\n\tregEmail: /^\\s*[\\w.-]+@[\\w-]+\\.(?:[\\w-]+\\.)?[A-Za-z]{2,8}\\s*$/,\n};\n\nlet errorMessages = {\n\trequired: '',\n\tphone: '',\n\temail: '',\n};\n\nconst url = 'data/errorMes.json';\nconst xhr = new XMLHttpRequest();\nxhr.open('GET', url);\nxhr.send();\nxhr.onload = () => {\n\tif (xhr.status === 200) {\n\t\terrorMessages = JSON.parse(xhr.response);\n\t}\n};\n\n// fetch(url).then((res) => res.json()).then((res) => errorMessages = res).catch(() => {});\n\nexport class Validate {\n\tconstructor(form, conf) {\n\t  this.form = form;\n\t  this.defaultConfig = {\n\t    url: 'https://echo.htmlacademy.ru',\n\t\t\tclassError: 'form-invalid',\n\t    statusMessages: {\n\t      success: 'Данные успешно обновлены',\n\t      bad: 'Удаленный сервер не найден',\n\t      error: 'Сервер недоступен',\n\t\t\t},\n\t\t};\n\n\t\tthis.config = Object.assign(this.defaultConfig, conf);\n\t\tthis.init();\n\t}\n\n\tinit() {\n\t\tthis.form.addEventListener('focusin', this);\n\t\tthis.form.addEventListener('focusout', this);\n\t\tthis.form.addEventListener('click', this);\n\t\tthis.form.addEventListener('submit', this);\n\t}\n\n\thandleEvent(e) {\n\t\tswitch (e.type) {\n\t\tcase 'focusin':\n\t\t\tif (e.target.hasAttribute('data-validate')) {\n\t\t\t\te.target.setCustomValidity('');\n\t\t\t\tif (e.target.dataset.validate === 'phone') {\n\t\t\t\t\tonFocusPhoneInput(e.target);\n\t\t\t\t}\n\t\t\t}\n\t\t\tbreak;\n\t\tcase 'focusout':\n\t\t\tif (e.target.hasAttribute('data-validate')) {\n\t\t\t\tthis.checkValue(e.target);\n\t\t\t}\n\t\t\tbreak;\n\t\tcase 'click':\n\t\t\tif (e.target.closest('[type=\"submit\"]')) {\n\t\t\t\tconst inputs = e.currentTarget.querySelectorAll('[data-validate]:not([disabled])');\n\t\t\t\tinputs.forEach((input) => {\n\t\t\t\t\tinput.parentElement.classList.add('validate');\n\t\t\t\t\tthis.checkValue(input);\n\t\t\t\t});\n\t\t\t\tif (!this.form.checkValidity()) { // если форма не валидна\n\t\t\t\t\tthis.form.addEventListener('animationend', () => {\n\t\t\t\t\t\tthis.form.classList.remove(this.config.classError);\n\t\t\t\t\t}, {once: true});\n\t\t\t\t\tthis.form.classList.add(this.config.classError);\n\t\t\t\t}\n\t\t\t}\n\t\t\tbreak;\n\t\tcase 'submit':\n\t\t\te.preventDefault();\n\t\t\tthis.sendData(this.form);\n\t\t}\n\t}\n\n\tsetErrorMes(target, message) {\n\t\tconst errorEl = target.parentElement.querySelector('[data-error]');\n\t\tif (errorEl) {\n\t\t\terrorEl.innerText = message;\n\t\t}\n\t\ttarget.setCustomValidity(message);\n\t}\n\n\tcheckValue(target) {\n\t\ttarget.parentElement.classList.add('validate');\n\t\tif (!target.value && target.required) {\n\t\t\tthis.setErrorMes(target, errorMessages.required);\n\t\t\treturn;\n\t\t}\n\n\t\tif (target.dataset.validate === 'email') {\n\t\t\ttarget.value = target.value.trim();\n\t\t\tif (target.value && !config.regEmail.test(target.value)) {\n\t\t\t\tthis.setErrorMes(target, errorMessages.email);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tif (target.dataset.validate === 'phone') {\n\t\t\tsetTimeout(() => {\n\t\t\t\tconst phoneLength = target.value.replace(/\\D/g, '').length;\n\t\t\t\tif (target.value && phoneLength < 11) {\n\t\t\t\t\tthis.setErrorMes(target, errorMessages.phone);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tbeforeSending() {\n\t\tconst spinner = document.querySelector('#spinner');\n\t\tif (spinner) {\n\t\t\tspinner.classList.remove('hidden');\n\t\t\tobjModal.frozen = true;\n\t\t}\n\t}\n\n\tafterSending() {\n\t\tconst spinner = document.querySelector('#spinner');\n\t\tif (spinner) {\n\t\t\tspinner.classList.add('hidden');\n\t\t\tobjModal.frozen = false;\n\t\t}\n\t}\n\n\ttransferAction(status) {\n\t\tif (status === 'success') {\n\t\t\tconsole.log('success');\n\t\t\twindow.location.pathname = '/auth.html';\n\t\t} else {\n\t\t\tconst modalInfo = document.querySelector('#modal-success');\n\t\t\tif (modalInfo) {\n\t\t\t\tconst title = modalInfo.querySelector('h2');\n\t\t\t\ttitle.innerText = this.config.statusMessages[status];\n\t\t\t\tobjModal.open(modalInfo, true);\n\t\t\t}\n\t\t}\n\t}\n\n\tsendData(form) {\n\t\tthis.beforeSending();\n\t\tconst xhr = new XMLHttpRequest();\n\t\txhr.open('POST', this.config.url);\n\t\txhr.onload = () => {\n\t\t\tif (xhr.status === 200) {\n\t\t\t\tthis.transferAction('success');\n\t\t\t\tform.reset();\n\t\t\t\tconst inputs = form.querySelectorAll('[data-validate]:not(:disabled)');\n\t\t\t\tinputs.forEach((input) => {\n\t\t\t\t\tinput.parentElement.classList.remove('validate');\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.transferAction('bad');\n\t\t\t}\n\t\t\tthis.afterSending();\n\t\t};\n\t\txhr.send(new FormData(form));\n\t\t/*    fetch(this.config.url, {\n      method: 'post',\n      body: new FormData(form),\n    }).then((res) => {\n      if (res.ok) {\n        this.transferAction('success');\n        form.reset();\n        const inputs = form.querySelectorAll('[data-validate]:not(:disabled)');\n        inputs.forEach((input) => {\n          input.parentElement.classList.remove('validate');\n        });\n      } else {\n        this.transferAction('bad');\n      }\n    }).catch(() => {\n      this.transferAction('error');\n    }).finally(() => {\n      this.afterSending();\n    });*/\n\t}\n}\n","import {Validate} from './ValidForm';\n\nclass MultiModal {\n\tconstructor(props) {\n\t\tconst defaultConfig = {\n\t\t\topenBtnAttribute: 'data-modal-open',\n\t\t\tcloseBtnAttribute: 'data-modal-close',\n\t\t\tcloseOnOverlay: true,\n\t\t\tmultiple: false,\n\t\t\tbeforeOpen() {\n\t\t\t},\n\t\t\tbeforeClose() {\n\t\t\t},\n\t\t};\n\t\tthis.config = Object.assign(defaultConfig, props);\n\t\tthis.init();\n\t}\n\nstatic overlay = false;\n\ninit() {\n\tthis.openedWindows = [];\n\tthis.currentWindow = null;\n\tthis.reopen = false;\n\tthis.frozen = false; // отменить обработчки событий\n\tthis.scrollPosition = 0;\n\tthis._focusableEls = 'a[href]:not(:disabled), input:not(:disabled):not([type=\"hidden\"]), select:not(:disabled), textarea:not(:disabled), button:not(:disabled), [contenteditable], [tabindex]:not([tabindex^=\"-\"])';\n\n\tif (!MultiModal.overlay) {\n\t\tMultiModal.overlay = document.createElement('div');\n\t\tMultiModal.overlay.classList.add('modal-overlay');\n\t\tdocument.body.append(MultiModal.overlay);\n\t}\n\tthis.eventsFeeler();\n}\n\neventsFeeler() {\n\tdocument.addEventListener('click', e => {\n\t  if (this.frozen) return;\n\t\tconst opener = e.target.closest('[' + this.config.openBtnAttribute + ']');\n\t\tif (opener) {\n\t\t\te.preventDefault();\n\t\t\tconst modalId = opener.getAttribute(this.config.openBtnAttribute);\n\t\t\tconst modal = document.getElementById(modalId);\n\t\t\tthis.open(modal, this.config.multiple, opener);\n\t\t} else if (e.target.closest('[' + this.config.closeBtnAttribute + ']')) {\n\t\t\tthis.close();\n\t\t} else if (this.config.closeOnOverlay && this.openedWindows.length) {\n\t\t\tif (!e.target.closest('.modal__wrap')) {\n\t\t\t\tthis.close();\n\t\t\t}\n\t\t}\n\t});\n\n\tdocument.addEventListener('keydown', e => {\n\t\tif (this.frozen) return;\n\t\tif ((e.key === 'Escape' || e.key === 'Esc') && this.openedWindows.length) {\n\t\t\te.preventDefault();\n\t\t\tthis.close();\n\t\t\treturn;\n\t\t}\n\t\tif (e.key === 'Tab' && this.openedWindows.length) {\n\t\t\tthis.focusCatcher(e);\n\t\t}\n\t});\n}\n\nopen(selector, multiple, opener) {\n\tif (this.openedWindows.length && !multiple) {\n\t\tthis.reopen = true;\n\t\tthis.close(selector, multiple, opener);\n\t\treturn;\n\t}\n\n\tlet modal = null;\n\tif (selector) {\n\t\tmodal = typeof selector === 'string' ? document.querySelector(selector) : selector;\n\t}\n\tif (!selector || !(modal instanceof HTMLElement)) {\n\t\tthis.removeOverlay();\n\t\treturn;\n\t}\n\n\tthis.currentWindow = {};\n\tthis.currentWindow.modal = modal;\n\tthis.currentWindow.focusableElements = this.currentWindow.modal.querySelectorAll(this._focusableEls);\n\tif (opener instanceof HTMLElement) {\n\t\tthis.currentWindow.starter = opener;\n\t\tthis.currentWindow.starter.setAttribute('aria-expanded', 'true');\n\t} else {\n\t\tthis.currentWindow.starter = document.activeElement;\n\t}\n\tthis.config.beforeOpen(this);\n\n\tif (!this.openedWindows.length) {\n\t\tthis.bodyScrollControl(true);\n\t\tMultiModal.overlay.classList.add('modal-overlay--show');\n\t}\n\n\tconst setFocus =() => {\n\t\tif (this.currentWindow.focusableElements.length) {\n\t\t\tthis.currentWindow.focusableElements[0].focus();\n\t\t}\n\t\tthis.currentWindow.modal.removeEventListener('transitionend', setFocus);\n\t};\n\n\tthis.currentWindow.modal.addEventListener('transitionend', setFocus);\n\tthis.currentWindow.modal.setAttribute('aria-hidden', 'false');\n\tthis.currentWindow.modal.classList.add('modal--active');\n\tthis.openedWindows.push(this.currentWindow);\n}\n\nclose(selector, multiple, opener) {\n\tthis.config.beforeClose(this);\n\tconst _currentWindow = this.openedWindows[this.openedWindows.length - 1];\n\t_currentWindow.modal.classList.remove('modal--active');\n\t_currentWindow.modal.setAttribute('aria-hidden', 'true');\n\t_currentWindow.starter.setAttribute('aria-expanded', 'false');\n\t_currentWindow.starter.focus();\n\n\tthis.openedWindows.pop();\n\tif (this.openedWindows.length) {\n\t\tthis.currentWindow = this.openedWindows[this.openedWindows.length - 1]; // для фокускэтчера на предыдущей модалке\n\t\treturn;\n\t}\n\n\tif (this.reopen) {\n\t\tthis.previousStarter = _currentWindow.starter;\n\t  this.reopen = false;\n\t  const modalOpen = () => {\n\t\t\tthis.open(selector, multiple, opener);\n\t\t\t_currentWindow.modal.removeEventListener('transitionend', modalOpen);\n\t  };\n\t\t_currentWindow.modal.addEventListener('transitionend', modalOpen);\n\t  return;\n\t}\n\n\tthis.removeOverlay();\n\n\tif (this.previousStarter) {\n\t\tthis.previousStarter.focus();\n\t}\n}\n\nremoveOverlay() {\n\tthis.bodyScrollControl();\n\tMultiModal.overlay.classList.remove('modal-overlay--show');\n}\n\nfocusCatcher(e) {\n\tconst firstFocusableEl = this.currentWindow.focusableElements[0];\n\tconst lastFocusableEl = this.currentWindow.focusableElements[this.currentWindow.focusableElements.length - 1];\n\n\tif (e.shiftKey) { // shift + tab\n\t\tif (document.activeElement === firstFocusableEl) {\n\t\t\tlastFocusableEl.focus();\n\t\t\te.preventDefault();\n\t\t}\n\t} else { // tab\n\t\tif (document.activeElement === lastFocusableEl) {\n\t\t\tfirstFocusableEl.focus();\n\t\t\te.preventDefault();\n\t\t}\n\t}\n}\n\nbodyScrollControl(open) {\n\tconst html = document.documentElement;\n\tif (open) {\n\t\tthis.scrollPosition = self.pageYOffset;\n\t\thtml.style.top = -this.scrollPosition + 'px';\n\t\thtml.classList.add('scroll-lock');\n\t} else {\n\t\thtml.classList.remove('scroll-lock');\n\t\tself.scrollTo(0, this.scrollPosition);\n\t\thtml.style.top = '';\n\t}\n}\n}\n\n\nlet modalLoginInit = false;\nlet modalRegisterInit = false;\nexport const objModal = new MultiModal({\n\tbeforeOpen(obj) {\n\t\tif (obj.currentWindow.modal.id === 'modal-login' && !modalLoginInit) {\n\t\t  const form = obj.currentWindow.modal.querySelector('form');\n\t\t\tnew Validate(form);\n\t\t\tmodalLoginInit = true;\n\t\t}\n\n\t\tif (obj.currentWindow.modal.id === 'modal-register' && !modalRegisterInit) {\n\t\t\tconst form = obj.currentWindow.modal.querySelector('form');\n\t\t\tnew Validate(form);\n\t\t\tmodalRegisterInit = true;\n\t\t}\n\t},\n});\n","const COUNTRY_CODE = '+7';\n\nconst onInputPhoneInput = ({target}) => {\n  const matrix = `${COUNTRY_CODE} (___) ___-__-__`;\n  const def = matrix.replace(/\\D/g, '');\n  let i = 0;\n  let val = target.value.replace(/\\D/g, '');\n  if (!val.length) {\n    val = def;\n  }\n\n  target.value = '';\n  Array.prototype.forEach.call(matrix, (item) => {\n    let isValNumber = /[_\\d]/.test(item) && val.length > i;\n    if (isValNumber) {\n      target.value += val.charAt(i++);\n    } else {\n      target.value += val.length <= i ? '' : item;\n    }\n  });\n};\n\nconst onFocusPhoneInput = (target) => {\n  if (!target.value) {\n    target.value = COUNTRY_CODE;\n  }\n  target.addEventListener('input', onInputPhoneInput);\n  target.addEventListener('blur', onBlurPhoneInput);\n};\n\nconst onBlurPhoneInput = ({target}) => {\n  if (target.value === COUNTRY_CODE) {\n    target.value = '';\n  }\n  target.removeEventListener('input', onInputPhoneInput);\n  target.removeEventListener('blur', onBlurPhoneInput);\n};\n\nexport default onFocusPhoneInput;\n"],"sourceRoot":""}
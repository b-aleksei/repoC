!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="./js/main.js")}({"./js/main.js":
/*!********************!*\
  !*** ./js/main.js ***!
  \********************/
/*! no exports provided */function(e,t,n){"use strict";n.r(t);var r=n(/*! ./modules/parallax */"./js/modules/parallax.js"),o=n(/*! ./modules/video */"./js/modules/video.js"),i=n(/*! ./modules/fileLoad */"./js/modules/fileLoad.js"),s=n(/*! ./modules/helper */"./js/modules/helper.js"),a=n(/*! ./modules/menu */"./js/modules/menu.js"),l=(n(/*! ./modules/intersectFilm */"./js/modules/intersectFilm.js"),n(/*! ./modules/preview */"./js/modules/preview.js")),c=n(/*! ./utils/ValidForm */"./js/utils/ValidForm.js");Object(r.default)(),Object(o.default)(),Object(i.default)();var u=null;document.addEventListener("click",(function(e){var t=e.target.closest(".show-password"),n=e.target.closest(".nav__toggle"),r=e.target.closest(".category-btn"),o=e.target.closest(".film__watch");o&&(u||Object(l.showPreview)(o),clearTimeout(u),u=setTimeout((function(){return u=null}),300)),t&&Object(s.showPassword)(t),n&&Object(a.toggleMenu)(n,"menu-active"),r&&Object(a.toggleMenu)(r,"category-active")}),{passive:!0});var d=document.querySelector(".profile");d&&new c.Validate(d);var f=document.querySelector(".banner");f&&new Flickity(f,{wrapAround:!0,setGallerySize:!1,autoPlay:!0,prevNextButtons:!1});var v=document.querySelector(".favorite__list");v&&new Flickity(v,{cellAlign:"left",freeScroll:!0,contain:!0,prevNextButtons:!1,pageDots:!1});var m=document.querySelector(".details-slider");m&&new Flickity(m,{cellAlign:"left",freeScroll:!0,contain:!0,prevNextButtons:!1,pageDots:!1,setGallerySize:!1})},"./js/modules/fileLoad.js":
/*!********************************!*\
  !*** ./js/modules/fileLoad.js ***!
  \********************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),t.default=function(){var e=document.querySelector(".avatar-profile img"),t=document.querySelector("#fileLoader");e&&t&&t.addEventListener("change",(function(t){var n=t.target;e.src=URL.createObjectURL(n.files[0])}))}},"./js/modules/helper.js":
/*!******************************!*\
  !*** ./js/modules/helper.js ***!
  \******************************/
/*! exports provided: showPassword */function(e,t,n){"use strict";n.r(t),n.d(t,"showPassword",(function(){return r}));var r=function(e){var t=e.parentElement.querySelector("input");e.classList.contains("show")?(e.classList.remove("show"),t.type="password"):(e.classList.add("show"),t.type="text")}},"./js/modules/intersectFilm.js":
/*!*************************************!*\
  !*** ./js/modules/intersectFilm.js ***!
  \*************************************/
/*! no static exports found */function(e,t){document.addEventListener("DOMContentLoaded",(function(){var e=[].slice.call(document.querySelectorAll(".lazy-img")),t=1;if("IntersectionObserver"in window){var n=new IntersectionObserver((function(e){e.forEach((function(e){if(e.isIntersecting){e.target.style.transitionDelay="0.".concat(t++,"s"),e.target.classList.remove("inv");var r=e.target.querySelector("source");r&&(r.srcset=r.dataset.srcset),n.unobserve(e.target)}})),t=1}));e.forEach((function(e){return n.observe(e)}))}}))},"./js/modules/menu.js":
/*!****************************!*\
  !*** ./js/modules/menu.js ***!
  \****************************/
/*! exports provided: toggleMenu */function(e,t,n){"use strict";n.r(t),n.d(t,"toggleMenu",(function(){return a}));var r=n(/*! ./preview */"./js/modules/preview.js"),o=!1,i=document.body,s=document.querySelectorAll(".category-btn, .nav__toggle"),a=function(e,t){o&&(e.setAttribute("aria-expanded","false"===e.getAttribute("aria-expanded")?"true":"false"),i.classList.toggle(t))};document.documentElement.clientWidth<1200&&(o=!0),window.addEventListener("resize",(function(){if(document.documentElement.clientWidth>1200&&o)return i.classList.remove("menu-active","category-active"),s.forEach((function(e){return e.setAttribute("aria-expanded","false")})),void(o=!1);document.documentElement.clientWidth<=1200&&!o&&(Object(r.removePreview)(),o=!0)}))},"./js/modules/parallax.js":
/*!********************************!*\
  !*** ./js/modules/parallax.js ***!
  \********************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),t.default=function(){var e=document.querySelectorAll(".blob-parallax");if(e.length){var t=!1,n=0,r=document.documentElement.offsetHeight;window.addEventListener("resize",(function(){r=document.documentElement.offsetHeight})),window.addEventListener("scroll",(function(){t||(t=!0,requestAnimationFrame(o),n=window.pageYOffset)}))}function o(){var o=n/r;e.forEach((function(e){e.style.transform="translate3d(0,"+500*o+"px, 0)"})),t=!1}}},"./js/modules/preview.js":
/*!*******************************!*\
  !*** ./js/modules/preview.js ***!
  \*******************************/
/*! exports provided: removePreview, showPreview */function(e,t,n){"use strict";n.r(t),n.d(t,"removePreview",(function(){return a})),n.d(t,"showPreview",(function(){return u}));var r=document.querySelector(".preview"),o=null,i=null,s=null,a=function(){o&&(o.addEventListener("transitionend",(function(){this.remove()}),{once:!0}),o.classList.remove("preview--visible"),o=null,s.focus())},l=function(e){console.log("updateModalField from server",e)},c=function(e,t,n){if(-1!==e){for(var s=null,c=Math.ceil(n.length/4),u=4;u<=4*c;u+=4)if(e<u){s=u;break}o&&+o.dataset.index===s&&i===t?l(o):(i=t,function(e,t,n){o&&a();var i=r.cloneNode(!0);i.querySelector(".preview__close").addEventListener("click",(function(){a()})),i.dataset.index=e,l(i),n[e-1].after(i),setTimeout((function(){o=i,document.addEventListener("keydown",(function(e){o&&"Escape"===e.key&&a()}),{once:!0}),i.classList.add("preview--visible")}),200)}(s,0,n))}},u=function(e){var t=e.closest(".film-list");if(t&&r){s=e;var n=e.dataset.details,o=[].slice.call(t.querySelectorAll(".film-item")),i=o.indexOf(document.getElementById(n));c(i,t,o)}}},"./js/modules/video.js":
/*!*****************************!*\
  !*** ./js/modules/video.js ***!
  \*****************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t),t.default=function(){var e=document.querySelector("#play-trailer"),t=document.querySelector("video"),n=document.querySelector(".trailer__wrap");e&&t&&n&&e.addEventListener("click",(function(){n.classList.add("playing"),t.play()}),{once:!0})}},"./js/utils/ValidForm.js":
/*!*******************************!*\
  !*** ./js/utils/ValidForm.js ***!
  \*******************************/
/*! exports provided: Validate */function(e,t,n){"use strict";n.r(t),n.d(t,"Validate",(function(){return c}));var r=n(/*! ./phoneMask */"./js/utils/phoneMask.js"),o=n(/*! ./modal */"./js/utils/modal.js");function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s={regEmail:/^\s*[\w.-]+@[\w-]+\.(?:[\w-]+\.)?[A-Za-z]{2,8}\s*$/},a={required:"",phone:"",email:""},l=new XMLHttpRequest;l.open("GET","data/errorMes.json"),l.send(),l.onload=function(){200===l.status&&(a=JSON.parse(l.response))};var c=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.form=t,this.defaultConfig={url:"https://echo.htmlacademy.ru",classError:"form-invalid",statusMessages:{success:"Данные успешно обновлены",bad:"Удаленный сервер не найден",error:"Сервер недоступен"}},this.config=Object.assign(this.defaultConfig,n),this.init()}var t,n,l;return t=e,(n=[{key:"init",value:function(){this.form.addEventListener("focusin",this),this.form.addEventListener("focusout",this),this.form.addEventListener("click",this),this.form.addEventListener("submit",this)}},{key:"handleEvent",value:function(e){var t=this;switch(e.type){case"focusin":e.target.hasAttribute("data-validate")&&(e.target.setCustomValidity(""),"phone"===e.target.dataset.validate&&Object(r.default)(e.target));break;case"focusout":e.target.hasAttribute("data-validate")&&this.checkValue(e.target);break;case"click":e.target.closest('[type="submit"]')&&(e.currentTarget.querySelectorAll("[data-validate]:not([disabled])").forEach((function(e){e.parentElement.classList.add("validate"),t.checkValue(e)})),this.form.checkValidity()||(this.form.addEventListener("animationend",this),this.form.classList.add(this.config.classError)));break;case"submit":e.preventDefault(),this.sendData(this.form);break;case"animationend":this.form.classList.remove(this.config.classError),this.form.removeEventListener("animationend",this)}}},{key:"setErrorMes",value:function(e,t){var n=e.parentElement.querySelector("[data-error]");n&&(n.innerText=t),e.setCustomValidity(t)}},{key:"checkValue",value:function(e){var t=this;e.parentElement.classList.add("validate"),e.value||!e.required?"email"!==e.dataset.validate||(e.value=e.value.trim(),!e.value||s.regEmail.test(e.value))?"phone"===e.dataset.validate&&setTimeout((function(){var n=e.value.replace(/\D/g,"").length;e.value&&n<11&&t.setErrorMes(e,a.phone)})):this.setErrorMes(e,a.email):this.setErrorMes(e,a.required)}},{key:"beforeSending",value:function(){var e=document.querySelector("#spinner");e&&(e.classList.remove("hidden"),o.objModal.frozen=!0)}},{key:"afterSending",value:function(){var e=document.querySelector("#spinner");e&&(e.classList.add("hidden"),o.objModal.frozen=!1)}},{key:"transferAction",value:function(e){if("success"===e)console.log("success"),window.location.pathname="./auth.html";else{var t=document.querySelector("#modal-success");t&&(t.querySelector("h2").innerText=this.config.statusMessages[e],o.objModal.open(t,!0))}}},{key:"sendData",value:function(e){var t=this;this.beforeSending();var n=new XMLHttpRequest;n.open("POST",this.config.url),n.onload=function(){200===n.status?(t.transferAction("success"),e.reset(),e.querySelectorAll("[data-validate]:not(:disabled)").forEach((function(e){e.parentElement.classList.remove("validate")}))):t.transferAction("bad"),t.afterSending()},n.send(new FormData(e))}}])&&i(t.prototype,n),l&&i(t,l),e}()},"./js/utils/modal.js":
/*!***************************!*\
  !*** ./js/utils/modal.js ***!
  \***************************/
/*! exports provided: objModal */function(e,t,n){"use strict";n.r(t),n.d(t,"objModal",(function(){return d}));var r=n(/*! ./ValidForm */"./js/utils/ValidForm.js");function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i,s,a,l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);this.config=Object.assign({openBtnAttribute:"data-modal-open",closeBtnAttribute:"data-modal-close",closeOnOverlay:!0,multiple:!1,beforeOpen:function(){},beforeClose:function(){}},t),this.init()}var t,n,r;return t=e,(n=[{key:"init",value:function(){this.openedWindows=[],this.currentWindow=null,this.reopen=!1,this.frozen=!1,this.scrollPosition=0,this._focusableEls='a[href]:not(:disabled), input:not(:disabled):not([type="hidden"]), select:not(:disabled), textarea:not(:disabled), button:not(:disabled), [contenteditable], [tabindex]:not([tabindex^="-"])',e.overlay||(e.overlay=document.createElement("div"),e.overlay.classList.add("modal-overlay"),document.body.append(e.overlay)),this.eventsFeeler()}},{key:"eventsFeeler",value:function(){var e=this;document.addEventListener("click",(function(t){if(!e.frozen){var n=t.target.closest("["+e.config.openBtnAttribute+"]");if(n){t.preventDefault();var r=n.getAttribute(e.config.openBtnAttribute),o=document.getElementById(r);e.open(o,e.config.multiple,n)}else t.target.closest("["+e.config.closeBtnAttribute+"]")?e.close():e.config.closeOnOverlay&&e.openedWindows.length&&(t.target.closest(".modal__wrap")||e.close())}})),document.addEventListener("keydown",(function(t){if(!e.frozen)return"Escape"!==t.key&&"Esc"!==t.key||!e.openedWindows.length?void("Tab"===t.key&&e.openedWindows.length&&e.focusCatcher(t)):(t.preventDefault(),void e.close())}))}},{key:"open",value:function(t,n,r){var o=this;if(this.openedWindows.length&&!n)return this.reopen=!0,void this.close(t,n,r);var i=null;t&&(i="string"==typeof t?document.querySelector(t):t),t&&i instanceof HTMLElement?(this.currentWindow={},this.currentWindow.modal=i,this.currentWindow.focusableElements=this.currentWindow.modal.querySelectorAll(this._focusableEls),r instanceof HTMLElement?(this.currentWindow.starter=r,this.currentWindow.starter.setAttribute("aria-expanded","true")):this.currentWindow.starter=document.activeElement,this.config.beforeOpen(this),this.openedWindows.length||(this.bodyScrollControl(!0),e.overlay.classList.add("modal-overlay--show")),this.currentWindow.modal.addEventListener("transitionend",(function e(){o.currentWindow.focusableElements.length&&o.currentWindow.focusableElements[0].focus(),o.currentWindow.modal.removeEventListener("transitionend",e)})),this.currentWindow.modal.setAttribute("aria-hidden","false"),this.currentWindow.modal.classList.add("modal--active"),this.openedWindows.push(this.currentWindow)):this.removeOverlay()}},{key:"close",value:function(e,t,n){var r=this;this.config.beforeClose(this);var o=this.openedWindows[this.openedWindows.length-1];o.modal.classList.remove("modal--active"),o.modal.setAttribute("aria-hidden","true"),o.starter.setAttribute("aria-expanded","false"),o.starter.focus(),this.openedWindows.pop(),this.openedWindows.length?this.currentWindow=this.openedWindows[this.openedWindows.length-1]:this.reopen?(this.previousStarter=o.starter,this.reopen=!1,o.modal.addEventListener("transitionend",(function i(){r.open(e,t,n),o.modal.removeEventListener("transitionend",i)}))):(this.removeOverlay(),this.previousStarter&&this.previousStarter.focus())}},{key:"removeOverlay",value:function(){this.bodyScrollControl(),e.overlay.classList.remove("modal-overlay--show")}},{key:"focusCatcher",value:function(e){var t=this.currentWindow.focusableElements[0],n=this.currentWindow.focusableElements[this.currentWindow.focusableElements.length-1];e.shiftKey?document.activeElement===t&&(n.focus(),e.preventDefault()):document.activeElement===n&&(t.focus(),e.preventDefault())}},{key:"bodyScrollControl",value:function(e){var t=document.documentElement;e?(this.scrollPosition=self.pageYOffset,t.style.top=-this.scrollPosition+"px",t.classList.add("scroll-lock")):(t.classList.remove("scroll-lock"),self.scrollTo(0,this.scrollPosition),t.style.top="")}}])&&o(t.prototype,n),r&&o(t,r),e}();a=!1,(s="overlay")in(i=l)?Object.defineProperty(i,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[s]=a;var c=!1,u=!1,d=new l({beforeOpen:function(e){if("modal-login"===e.currentWindow.modal.id&&!c){var t=e.currentWindow.modal.querySelector("form");new r.Validate(t),c=!0}if("modal-register"===e.currentWindow.modal.id&&!u){var n=e.currentWindow.modal.querySelector("form");new r.Validate(n),u=!0}}})},"./js/utils/phoneMask.js":
/*!*******************************!*\
  !*** ./js/utils/phoneMask.js ***!
  \*******************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t);var r=function(e){var t=e.target,n="".concat("+7"," (___) ___-__-__"),r=n.replace(/\D/g,""),o=0,i=t.value.replace(/\D/g,"");i.length||(i=r),t.value="",Array.prototype.forEach.call(n,(function(e){var n=/[_\d]/.test(e)&&i.length>o;t.value+=n?i.charAt(o++):i.length<=o?"":e}))},o=function e(t){var n=t.target;"+7"===n.value&&(n.value=""),n.removeEventListener("input",r),n.removeEventListener("blur",e)};t.default=function(e){e.value||(e.value="+7"),e.addEventListener("input",r),e.addEventListener("blur",o)}}});